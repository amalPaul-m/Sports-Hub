{{#section 'styles'}}
<link rel="stylesheet" href="/stylesheets/address.css">
{{/section}}

<nav class="navbar navbar-expand-lg bg-body-white border-bottom bg-white sticky-top">
  <div class="container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01"
      aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
      <a class="navbar-brand pe-5" href="#"><img src="/images/logo.png" alt="logo"></a>

      <form role="search" action="/userproducts/search" method="get" class="d-flex gap-2 me-5">
        <input type="text" class="form-control form-control-sm shadow-none" placeholder="Search..."
          style="width: 200px;" name="searchItem" value="{{query}}" required>
        <button class="btn btn-outline-secondary btn-sm " type="submit">Search</button>
      </form>

      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active pe-5" aria-current="page" href="/home">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link px-2" href="#">New Arraival</a>
        </li>
      </ul>

      <ul class="navbar-nav mb-2 mb-lg-0 ">
        <li class="nav-item pe-4">
          <a class="nav-link" href="/wishlist"><img src="/images/wishlist.png" alt="wishlist"></a>
        </li>
        <li class="nav-item pe-4">
          <a class="nav-link" href="#"><img src="/images/cart.png" alt="cart"></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/youraccount"><img src="/images/user.png" alt="profile"></a>
        </li>
      </ul>
    </div>
  </div>
</nav>


<div class="container py-5">
  <h2 class="section-title mb-4">Your Addresses</h2>
  <div class="row g-3">

    <!-- Add Address Card -->
    <div class="col-md-4">
      <a href="" class="text-decoration-none" data-bs-toggle="modal" data-bs-target="#addressModal">
        <div class="address-card add-address">
          <img src="https://cdn-icons-png.flaticon.com/512/992/992651.png" alt="Add Icon" />
          Add Address
        </div>
      </a>
    </div>

    <!-- Address 1 -->
    {{#each addressData}}
    <div class="col-md-4">
      <div class="address-card">
        <p><strong>{{this.fullName}}</strong></p>
        <p>{{this.houseNo}}</p>
        <p>{{this.landMark}}</p>
        <p>{{this.street}}, {{this.district}} {{this.pinCode}}</p>
        <p>{{this.state}}</p>
        <p>Address Type: {{this.addressType}}</p>
        <p>Phone number: {{this.mobileNumber}}, {{this.alternate_number}}</p>
        <div class="address-actions mt-2">
          <a href="#" class="text-primary text-decoration-none" data-bs-toggle="modal"
            data-bs-target="#editaddressModal{{this._id}}">Edit</a>
          <a href="#" class="text-danger text-decoration-none" data-bs-toggle="modal"
            data-bs-target="#removeModal{{this._id}}">Remove</a>
        </div>
      </div>
    </div>




    <!-- edit address Modal -->
    <div class="modal fade modal-lg" id="editaddressModal{{this._id}}" tabindex="-1" aria-labelledby="addressModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <img src="/images/nav.webp" alt="" height="30">
            <h5 class="modal-title ms-2" id="addressModalLabel"><b>Edit Address</b></h5>
            <button type="button" class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">

            <form action="/youraccount/editaddress?_method=PATCH" method="post" class="needs-validation" novalidate>
              <input type="hidden" name="addressId" value="{{this._id}}" />
              <div class="row g-3">

                <div class="col-md-6">
                  <label class="form-label"><b>Full Name</b></label>
                  <input type="text" class="form-control shadow-none py-2" value="{{this.fullName}}"
                    placeholder="Enter your name" required pattern="[A-Za-z\s]+" name="fullName" />
                  <div class="invalid-feedback">Please enter a valid name (letters only).</div>
                </div>

                <div class="col-md-6">
                  <label class="form-label"><b>Mobile Number</b></label>
                  <input type="tel" class="form-control shadow-none py-2" value="{{this.mobileNumber}}"
                    placeholder="May be used to assist delivery" required pattern="[0-9]{10}" name="mobileNumber" />
                  <div class="invalid-feedback">Enter a valid 10-digit phone number.</div>
                </div>

                <div class="col-md-6">
                  <label class="form-label"><b>Pincode</b></label>
                  <input type="text" class="form-control shadow-none py-2" value="{{this.pinCode}}"
                    placeholder="6 digits [0-9] pincode" required pattern="\d{6}" name="pinCode" />
                  <div class="invalid-feedback">Enter a 6-digit pincode.</div>
                </div>

                <div class="col-md-6">
                  <label class="form-label"><b>Area/Street/Sector/Village</b></label>
                  <input type="text" class="form-control shadow-none py-2" value="{{this.street}}"
                    placeholder="Enter your Locality or town" required name="street" />
                  <div class="invalid-feedback">Please enter your locality.</div>
                </div>

                <div class="col-md-6">
                  <label class="form-label"><b>Flat/House no./Building/Company/Apartment</b></label>
                  <textarea class="form-control shadow-none py-2" rows="2" placeholder="Enter your address" required
                    name="houseNo">{{this.houseNo}}</textarea>
                  <div class="invalid-feedback">Please enter your address.</div>
                </div>

                <div class="col-md-3">
                  <label class="form-label"><b>District</b></label>
                  <select class="form-select  shadow-none py-2" name="district" required>
                    <option value="" disabled selected>{{this.district}}</option>
                    <option value="Ernakulam">Ernakulam</option>
                    <option value="Thrissur">Thrissur</option>
                    <option value="Kozhikode">Kozhikode</option>
                  </select>
                  <div class="invalid-feedback">Please select a district.</div>
                </div>

                <div class="col-md-3">
                  <label class="form-label"><b>State</b></label>
                  <select class="form-select  shadow-none py-2" name="state" required>
                    <option value="" disabled selected>{{this.state}}</option>
                    <option value="Kerala">Kerala</option>
                    <option value="Tamil Nadu">Tamil Nadu</option>
                    <option value="Karnataka">Karnataka</option>
                  </select>
                  <div class="invalid-feedback">Please select a state.</div>
                </div>

                <div class="col-md-6">
                  <label class="form-label"><b>Landmark</b></label>
                  <input type="text" class="form-control shadow-none py-2" value="{{this.landMark}}"
                    placeholder="Eg: Near Rajagiri Hospital" required name="landMark" />
                  <div class="invalid-feedback">Please enter a landmark.</div>
                </div>

                <div class="col-md-6">
                  <label class="form-label"><b>Alternate Mobile Number</b></label>
                  <input type="tel" class="form-control shadow-none py-2" value="{{alternate_number}}"
                    placeholder="Enter your alternate mobile number (Optional)" pattern="[0-9]{10}"
                    name="alternate_number" />
                  <div class="invalid-feedback">Enter a valid 10-digit alternate number (optional).</div>
                </div>

                <div class="col-md-12 pt-3">
                  <label class="form-label d-block mb-2"><b>Address Type</b></label>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input shadow-none" type="radio" name="addressType" id="home" value="Home"
                      required {{#if (eq addressType "Home" )}}checked{{/if}} />
                    <label class="form-check-label" for="home">Home</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input shadow-none" type="radio" name="addressType" id="work" value="Work"
                      {{#if (eq addressType "Work" )}}checked{{/if}} />
                    <label class="form-check-label" for="work">Work</label>
                  </div>
                  <div class="invalid-feedback d-block">Please select address type.</div>
                </div>

              </div>

          </div>
          <div class="modal-footer">
            <button type="reset" class="btn btn-outline-dark px-4" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-dark px-4">Save</button>
          </div>
          </form>
        </div>
      </div>
    </div>



    <!-- remove modal -->
    <div class="modal fade bg-setting" id="removeModal{{this._id}}" tabindex="-1" aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog float-end me-5">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Remove Address</h1>
            <button type="button" class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            Are you sure to remove this address?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Close</button>

            <form action="/youraccount/deleteaddress?_method=DELETE" method="post">
              <input type="hidden" name="addressId" value="{{this._id}}" />
              <button type="submit" class="btn btn-outline-danger">Remove</button>
            </form>

          </div>
        </div>
      </div>
    </div>


    {{/each}}



  </div>
</div>




<!-- Modal -->
<div class="modal fade modal-lg" id="addressModal" tabindex="-1" aria-labelledby="addressModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <img src="/images/nav.webp" alt="" height="30">
        <h5 class="modal-title ms-2" id="addressModalLabel"><b>Add New Address</b></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form action="/youraccount/address" method="post" class="needs-validation" novalidate>
          <div class="row g-3">

            <div class="col-md-6">
              <label class="form-label"><b>Full Name</b></label>
              <input type="text" class="form-control shadow-none py-2" placeholder="Enter your name" required
                pattern="[A-Za-z\s]+" name="fullName" />
              <div class="invalid-feedback">Please enter a valid name (letters only).</div>
            </div>

            <div class="col-md-6">
              <label class="form-label"><b>Mobile Number</b></label>
              <input type="tel" class="form-control shadow-none py-2" placeholder="May be used to assist delivery"
                required pattern="[0-9]{10}" name="mobileNumber" />
              <div class="invalid-feedback">Enter a valid 10-digit phone number.</div>
            </div>

            <div class="col-md-6">
              <label class="form-label"><b>Pincode</b></label>
              <input type="text" class="form-control shadow-none py-2" placeholder="6 digits [0-9] pincode" required
                pattern="\d{6}" name="pinCode" />
              <div class="invalid-feedback">Enter a 6-digit pincode.</div>
            </div>

            <div class="col-md-6">
              <label class="form-label"><b>Area/Street/Sector/Village</b></label>
              <input type="text" class="form-control shadow-none py-2" placeholder="Enter your Locality or town"
                required name="street" />
              <div class="invalid-feedback">Please enter your locality.</div>
            </div>

            <div class="col-md-6">
              <label class="form-label"><b>Flat/House no./Building/Company/Apartment</b></label>
              <textarea class="form-control shadow-none py-2" rows="2" placeholder="Enter your address" required
                name="houseNo"></textarea>
              <div class="invalid-feedback">Please enter your address.</div>
            </div>

            <div class="col-md-3">
              <label class="form-label"><b>District</b></label>
              <select class="form-select  shadow-none py-2" name="district" required>
                <option value="" disabled selected>----- District -----</option>
                <option value="Ernakulam">Ernakulam</option>
                <option value="Thrissur">Thrissur</option>
                <option value="Kozhikode">Kozhikode</option>
              </select>
              <div class="invalid-feedback">Please select a district.</div>
            </div>

            <div class="col-md-3">
              <label class="form-label"><b>State</b></label>
              <select class="form-select  shadow-none py-2" name="state" required>
                <option value="" disabled selected>------- State -------</option>
                <option value="Kerala">Kerala</option>
                <option value="Tamil Nadu">Tamil Nadu</option>
                <option value="Karnataka">Karnataka</option>
              </select>
              <div class="invalid-feedback">Please select a state.</div>
            </div>

            <div class="col-md-6">
              <label class="form-label"><b>Landmark</b></label>
              <input type="text" class="form-control shadow-none py-2" placeholder="Eg: Near Rajagiri Hospital" required
                name="landMark" />
              <div class="invalid-feedback">Please enter a landmark.</div>
            </div>

            <div class="col-md-6">
              <label class="form-label"><b>Alternate Mobile Number</b></label>
              <input type="tel" class="form-control shadow-none py-2"
                placeholder="Enter your alternate mobile number (Optional)" pattern="[0-9]{10}"
                name="alternate_number" />
              <div class="invalid-feedback">Enter a valid 10-digit alternate number (optional).</div>
            </div>

            <div class="col-md-12 pt-3">
              <label class="form-label d-block mb-2"><b>Address Type</b></label>
              <div class="form-check form-check-inline">
                <input class="form-check-input shadow-none" type="radio" name="addressType" id="home" value="Home"
                  required />
                <label class="form-check-label" for="home">Home</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input shadow-none" type="radio" name="addressType" id="work" value="Work" />
                <label class="form-check-label" for="work">Work</label>
              </div>
              <div class="invalid-feedback d-block">Please select address type.</div>
            </div>

          </div>

      </div>
      <div class="modal-footer">
        <button type="reset" class="btn btn-outline-dark px-4" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-dark px-4">Save</button>
      </div>
      </form>
    </div>
  </div>
</div>





<!--Footer-->

<div class="bg-black text-white mt-5">
  <div class="container py-5">
    <div class="row">
      <div class="col-md-6 pe-4">
        <img src="/images/Logo-dark.png" alt="logo">
        <p class="hf-p">We are a wolesale sports materials selling firm located in <br>ernakulam. Our shops
          offers more than</p>

        <a class="text-decoration-none pe-4" href="#"><img src="/images/Twitter.png" alt="Twitter"></a>
        <a class="text-decoration-none pe-4" href="#"><img src="/images/Facebook.png" alt="Facebook"></a>
        <a class="text-decoration-none pe-4" href="#"><img src="/images/Instagram.png" alt="Instagram"></a>
      </div>
      <div class="col-md-3">
        <h5 class="hf-h5">Info</h5>
        <a class="text-decoration-none" href="#">
          <p class="hf-p text-white">Contact Us</p>
        </a>
        <a class="text-decoration-none" href="#">
          <p class="hf-p text-white">About Us</p>
        </a>
      </div>
      <div class="col-md-3">
        <h5 class="hf-h5">Assistance to the buyer</h5>
        <a class="text-decoration-none" href="#">
          <p class="hf-p text-white">Find an order</p>
        </a>
        <a class="text-decoration-none" href="#">
          <p class="hf-p text-white">Terms and conditions</p>
        </a>
        <a class="text-decoration-none" href="#">
          <p class="hf-p text-white">Exchange and return of goods</p>
        </a>
        <a class="text-decoration-none" href="#">
          <p class="hf-p text-white">Cookie policy</p>
        </a>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 pt-5">
        <h5 class="text-center">© 2025 | SPORTS HUB | All Rights Reserved.</h5>
      </div>
    </div>

  </div>
</div>


{{#section 'scripts'}}
<script src="/javascripts/address.js"></script>
{{/section}}